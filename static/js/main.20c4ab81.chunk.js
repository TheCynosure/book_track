(this.webpackJsonpbook_track=this.webpackJsonpbook_track||[]).push([[0],{54:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n(0),i=n.n(a),o=n(24),r=n.n(o),c=(n(54),n(55),n(10)),l=n(11),h=n(13),u=n(12),d=n(67),j=n(68),b=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={style:{opacity:1}},s}return Object(l.a)(n,[{key:"componentWillReceiveProps",value:function(e,t){var n=this;e.showBook!==this.props.showBook&&setTimeout((function(){return n.visibleStyle()}),10)}},{key:"visibleStyle",value:function(e){this.callback=e,this.setState({style:{opacity:1,transition:"all .2s ease"}})}},{key:"invisibleStyle",value:function(e){this.callback=e,this.setState({open:!1,style:{opacity:0,transition:"all .2s ease"}})}},{key:"transitionEnd",value:function(e){e.target.className.includes("IconHeader")&&this.execCallback()}},{key:"execCallback",value:function(){void 0!==this.callback&&this.callback()}},{key:"onClick",value:function(){var e=this;this.invisibleStyle((function(){e.props.onClick()}))}},{key:"render",value:function(){var e=this;return Object(s.jsx)(d.a,{className:"mt-5 mb-5 text-center",children:Object(s.jsx)("h1",{onTransitionEnd:function(t){return e.transitionEnd(t)},className:"IconHeader",style:this.state.style,children:Object(s.jsx)(j.a,{})})})}}]),n}(i.a.Component),p=n(19),f=n.n(p),k=n(28),x=n(69),O=n(70),v=n(79),m=n(48),y=n(82),g=n(83),w=n(76),B=n(74),C=n(75),N=n(71),S=n(80),T=n(72),M=n(73);function L(e){return Object(s.jsxs)(d.a,{className:"w-100 p-0",children:[Object(s.jsx)("hr",{}),Object(s.jsxs)(x.a,{className:"pt-3 pb-3 align-items-center",children:[Object(s.jsx)(O.a,{lg:3,md:3,sm:3,xs:12,className:"px-0 py-2",children:Object(s.jsxs)(N.a,{size:"sm",children:[Object(s.jsx)(N.a.Prepend,{children:Object(s.jsx)(N.a.Text,{children:"Page #"})}),Object(s.jsx)(S.a,{placeholder:e.current_page,onChange:function(t){return function(e,t){isNaN(Number(e.target.value))||(Number(e.target.value)>t.length&&(e.target.value=t.length),t.updateBook(Number(e.target.value),t.length))}(t,e)}})]})}),Object(s.jsx)(O.a,{lg:{span:4,offset:1},md:{span:4,offset:1},sm:{span:4,offset:1},xs:12,className:"px-0 py-2",children:Object(s.jsxs)(N.a,{size:"sm",children:[Object(s.jsx)(N.a.Prepend,{children:Object(s.jsx)(N.a.Text,{children:"Max Page #"})}),Object(s.jsx)(S.a,{placeholder:e.length,onChange:function(t){return function(e,t){isNaN(Number(e.target.value))||t.updateBook(t.current_page,Number(e.target.value))}(t,e)}})]})}),""===e.link?Object(s.jsx)(s.Fragment,{}):Object(s.jsx)(O.a,{className:"px-0 py-2 text-center",lg:{span:1,offset:0},md:{span:1,offset:0},sm:{span:1,offset:4},xs:{span:1,offset:0},children:Object(s.jsx)(y.a,{variant:"info",className:"btn-sm",href:e.link,onClick:function(t){t.preventDefault(),window.open(e.link)},children:Object(s.jsx)(T.a,{})})}),Object(s.jsx)(O.a,{className:"px-0 py-2 text-center",lg:{span:1,offset:""===e.link?3:2},md:{span:1,offset:""===e.link?3:2},sm:{span:1,offset:""===e.link?5:3},xs:{span:1,offset:9},children:Object(s.jsx)(y.a,{variant:"danger",className:"btn-sm",onClick:function(){return e.removeBook()},children:Object(s.jsx)(M.a,{})})})]})]})}var V=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={open:!1,show:!0,style:{opacity:0}},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.visibleStyle()}),10)}},{key:"visibleStyle",value:function(){this.setState({style:{opacity:1,transition:"all .3s ease"}})}},{key:"invisibleStyle",value:function(e){this.callback=e,this.setState({open:!1,style:{opacity:0,transition:"all .3s ease"}})}},{key:"transitionEnd",value:function(e){e.target.className.includes("BookListAnimation")&&0===this.state.style.opacity&&this.setState({show:!1},this.execCallback)}},{key:"execCallback",value:function(){void 0!==this.callback&&this.callback()}},{key:"isComplete",value:function(){return this.props.book.current_page===this.props.book.length&&!this.state.open}},{key:"renderButton",value:function(){var e=this;return this.isComplete()?Object(s.jsx)(y.a,{variant:"success",className:"btn-sm",onClick:function(){return e.onClick()},disabled:this.props.disabled,children:Object(s.jsx)(B.a,{})}):Object(s.jsx)(y.a,{variant:this.state.open?"secondary":"primary",onClick:function(){return e.onClick()},"aria-controls":"book-config-collapse","aria-expanded":this.state.open,className:"btn-sm",disabled:this.props.disabled,children:Object(s.jsx)(C.a,{})})}},{key:"onClick",value:function(){var e=this;this.isComplete()?this.invisibleStyle((function(){return e.props.finishBook()})):this.setState({open:!this.state.open})}},{key:"render",value:function(){var e=this;return this.state.show&&Object(s.jsx)(v.a.Item,{style:this.state.style,onTransitionEnd:function(t){return e.transitionEnd(t)},className:"BookListAnimation",children:Object(s.jsxs)(d.a,{children:[Object(s.jsxs)(x.a,{className:"align-items-center",children:[Object(s.jsx)(O.a,{lg:4,sm:12,xs:12,className:"px-0 py-2",children:Object(s.jsx)("h4",{className:"mb-0",children:this.props.book.title})}),Object(s.jsx)(O.a,{lg:7,sm:12,xs:12,className:"px-0 py-2",children:Object(s.jsx)(g.a,{variant:this.props.book.current_page>=this.props.book.length?"success":"info",now:this.props.book.current_page/this.props.book.length*100,label:Math.floor(this.props.book.current_page/this.props.book.length*100)+"%",style:{width:"100%"},disabled:this.props.disabled})}),Object(s.jsx)(O.a,{lg:{span:1,offset:0},sm:{span:12,offset:0},xs:{span:12,offset:0},className:"py-2 text-center",children:this.renderButton()})]}),Object(s.jsx)(x.a,{children:Object(s.jsx)(O.a,{children:Object(s.jsx)(w.a,{in:this.state.open,children:Object(s.jsx)("div",{id:"book-config-collapse",children:Object(s.jsx)("div",{className:"pt-3 pb-3",children:Object(s.jsx)(L,Object(m.a)({updateBook:function(t,n){return e.props.updateBook(t,n)},removeBook:function(){return e.invisibleStyle((function(){return e.props.removeBook()}))}},this.props.book))})})})})})]})})}}]),n}(i.a.Component);function A(e){return Object(s.jsx)(d.a,{children:Object(s.jsx)(x.a,{children:Object(s.jsx)(O.a,{children:Object(s.jsx)(v.a,{children:e.books.map((function(t,n){return Object(s.jsx)(V,{book:t,updateBook:function(n,s){return e.updateBook(t.title)(n,s)},removeBook:function(){return e.removeBook(t.title)},finishBook:function(){return e.finishBook(t.title)},disabled:e.disabled},t.title)}))})})})})}var E=n(77),G=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(s.jsx)(d.a,{children:Object(s.jsx)(x.a,{className:"text-center",children:Object(s.jsx)(O.a,{children:Object(s.jsx)(y.a,{className:"mt-3 mb-3 btn-sm",onClick:function(){return e.props.handleNewBook()},children:Object(s.jsx)(E.a,{})})})})})}}]),n}(i.a.Component),I=n(78),P=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={title:"",length:1,isTitleInputValid:!1,isLengthInputValid:!1,possibleGBooks:[]},s}return Object(l.a)(n,[{key:"updatePossibleGBooks",value:function(e){var t=this;fetch("https://book-track-backend.herokuapp.com/gbooks/search/"+e).then((function(e){e.json().then((function(e){t.setState({possibleGBooks:e})})).catch((function(e){console.error(e),t.setState({possibleGBooks:[]})}))}))}},{key:"onTitleChange",value:function(e){null!==e.target.value&&0!==e.target.value.length&&this.props.checkValid(e.target.value)?(this.updatePossibleGBooks(e.target.value),this.setState({title:e.target.value,isTitleInputValid:!0})):this.setState({title:e.target.value,isTitleInputValid:!1})}},{key:"onMaxChange",value:function(e){isNaN(Number(e.target.value))||Number(e.target.value)<=0?this.setState({length:1,isLengthInputValid:!1}):this.setState({length:e.target.value,isLengthInputValid:!0})}},{key:"handleSubmit",value:function(){var e=this.state.title,t=this.state.length,n=this.hasExactGBookMatch()?"https://www.gutenberg.org/ebooks/"+this.getExactGBookMatches()[0].number:"";this.setState({title:"",length:1,isTitleInputValid:!1,isLengthInputValid:!1,possibleGBooks:[]}),this.props.onAdd({title:e,length:t,link:n})}},{key:"hasExactGBookMatch",value:function(){return this.getExactGBookMatches().length>=1}},{key:"getExactGBookMatches",value:function(){var e=this;return this.state.possibleGBooks.filter((function(t){return t.title===e.state.title}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)(I.a,{show:this.props.show,onHide:function(){return e.props.onCancel()},backdrop:"static",children:[Object(s.jsx)(I.a.Header,{closeButton:!0,children:Object(s.jsx)(I.a.Title,{children:"Add A Book"})}),Object(s.jsx)(I.a.Body,{children:Object(s.jsxs)(d.a,{children:[Object(s.jsx)(x.a,{className:"m-2",children:Object(s.jsx)(O.a,{children:Object(s.jsxs)(N.a,{children:[Object(s.jsx)(N.a.Prepend,{children:Object(s.jsx)(N.a.Text,{children:"Title"})}),Object(s.jsx)(S.a,{onChange:function(t){return e.onTitleChange(t)}}),Object(s.jsx)(N.a.Append,{children:Object(s.jsx)(N.a.Text,{children:Object(s.jsx)(T.a,{className:this.state.possibleGBooks.length>0?this.hasExactGBookMatch()?"text-success":"text-info":"text-secondary"})})})]})})}),Object(s.jsx)(x.a,{className:"m-2",children:Object(s.jsx)(O.a,{children:Object(s.jsxs)(N.a,{children:[Object(s.jsx)(N.a.Prepend,{children:Object(s.jsx)(N.a.Text,{children:"Max Page #"})}),Object(s.jsx)(S.a,{onChange:function(t){return e.onMaxChange(t)}})]})})})]})}),Object(s.jsxs)(I.a.Footer,{children:[Object(s.jsx)(y.a,{variant:"secondary",onClick:function(){return e.props.onCancel()},children:"Cancel"}),Object(s.jsx)(y.a,{variant:"primary",onClick:function(){return e.handleSubmit()},disabled:!(this.state.isTitleInputValid&&this.state.isLengthInputValid),children:"Add"})]})]})}}]),n}(i.a.Component),_=n(44),H=n.n(_),z=n(45),D=n.n(z);function R(e){var t=e.current,n=e.total;return 0===t&&0===n&&(n=1),Object(s.jsx)(d.a,{className:"w-100 mt-3 mb-3",children:Object(s.jsx)(g.a,{now:Math.floor(t/n*100),label:t+" / "+n})})}var q="https://book-track-backend.herokuapp.com/",J=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={books:[],history:[],showAddModal:!1,windowSize:{width:void 0,height:void 0},showConfetti:!1,isLoaded:!1},s}return Object(l.a)(n,[{key:"handleResize",value:function(){this.setState({windowSize:{width:window.innerWidth,height:window.innerHeight}})}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){return e.handleResize()})),this.getAllBooks()}},{key:"componentWillUnmount",value:function(){var e=this;window.addEventListener("resize",(function(){return e.handleResize()}))}},{key:"getAllBooks",value:function(){var e=Object(k.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBooks();case 2:return e.next=4,this.getBooks(!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBooks",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,n,s=this,a=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]&&a[0],n=q+(t?"history":"books"),fetch(n).then((function(e){304===e.status?s.setState({isLoaded:!1}):e.json().then((function(e){t?s.setState({history:e,isLoaded:!0}):s.setState({books:e,isLoaded:!0})})).catch((function(e){console.log(e),s.setState({isLoaded:!0,error:e})}))}),(function(e){console.error(e),s.setState({isLoaded:!0,error:e})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateBook",value:function(e){var t=this;return function(){var n=Object(k.a)(f.a.mark((function n(s,a){var i,o,r,c,l;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.state.books.slice(),(o=i.find((function(t){return t.title===e}))).current_page=s,o.length=a,(r=new Headers).append("Content-Type","application/json"),c={method:"PUT",headers:r,body:JSON.stringify(o)},l=new Request(q+"books",c),n.next=10,fetch(l);case 10:if(200!==n.sent.status){n.next=15;break}return t.setState({isLoaded:!0}),n.next=15,t.getAllBooks();case 15:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}},{key:"removeBook",value:function(){var e=Object(k.a)(f.a.mark((function e(t){var n,s,a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoaded:!1}),n=this.state.books.slice(),0!==(s=n.filter((function(e){return e.title===t}))).length){e.next=6;break}return console.error("No matching book for one deleted."),e.abrupt("return");case 6:return console.log(s[0].title),(a=new Headers).append("Content-Type","application/json"),i={method:"DELETE",headers:a,body:JSON.stringify(s[0])},o=new Request(q+"books",i),e.next=13,fetch(o);case 13:if(200!==e.sent.status){e.next=18;break}return this.setState({isLoaded:!0}),e.next=18,this.getAllBooks();case 18:return e.abrupt("return",s);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"finishBook",value:function(e){var t=this,n=this.state.books.filter((function(t){return t.title===e}))[0];this.removeBook(e).then((function(){t.spawnConfetti(),t.addBook(n,!0)}))}},{key:"promptNewBookModal",value:function(){this.setState({showAddModal:!0})}},{key:"addBook",value:function(){var e=Object(k.a)(f.a.mark((function e(t){var n,s,a,i,o,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],this.setState({isLoaded:!1}),t.current_page=n?t.length:0,(s=new Headers).append("Content-Type","application/json"),a={method:"POST",headers:s,body:JSON.stringify(t)},i=q+(n?"history":"books"),this.setState({showAddModal:!1}),o=new Request(i,a),e.next=11,fetch(o);case 11:if(200!==e.sent.status){e.next=16;break}return this.setState({isLoaded:!0}),e.next=16,this.getAllBooks();case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"spawnConfetti",value:function(){this.setState({showConfetti:!0})}},{key:"onConfettiComplete",value:function(e){this.setState({showConfetti:!1}),e.reset()}},{key:"isTitleUnique",value:function(e){return 0===this.state.books.filter((function(t){return t.title===e})).length}},{key:"renderBookHistory",value:function(){if(this.state.history.length>0)return Object(s.jsxs)(d.a,{className:"p-0",children:[Object(s.jsx)(x.a,{className:"p-0",children:Object(s.jsx)(O.a,{children:Object(s.jsx)(R,{current:this.state.history.length,total:this.state.history.length+this.state.books.length})})}),Object(s.jsx)(x.a,{className:"p-0",children:Object(s.jsx)(O.a,{children:Object(s.jsx)(A,{books:this.state.history,disabled:!0})})})]})}},{key:"renderMainScreen",value:function(){var e=this,t=this.state.windowSize.width,n=this.state.windowSize.height;return Object(s.jsxs)(d.a,{lg:8,md:8,sm:8,xs:12,children:[Object(s.jsx)(H.a,{width:t,height:n,recycle:!1,numberOfPieces:this.state.showConfetti?500:0,onConfettiComplete:function(t){return e.onConfettiComplete(t)}}),Object(s.jsx)(A,{books:this.state.books,updateBook:function(t){return e.updateBook(t)},removeBook:function(t){return e.removeBook(t)},finishBook:function(t){return e.finishBook(t)}}),Object(s.jsx)(G,{handleNewBook:function(){return e.promptNewBookModal()}}),this.renderBookHistory(),Object(s.jsx)(P,{show:this.state.showAddModal,onAdd:function(t){return e.addBook(t)},onCancel:function(){return e.setState({showAddModal:!1})},checkValid:function(t){return e.isTitleUnique(t)}})]})}},{key:"render",value:function(){return Object(s.jsx)(d.a,{children:this.renderMainScreen()})}}]),n}(i.a.Component),U=D()(J),F=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(s.jsx)(d.a,{fluid:!0})}}]),n}(i.a.Component),W=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={mainView:!0},s}return Object(l.a)(n,[{key:"switchViews",value:function(){this.setState({mainView:!this.state.mainView})}},{key:"render",value:function(){var e=this;return Object(s.jsxs)(d.a,{fluid:!0,style:{overflowY:"auto",overflowX:"hidden"},children:[Object(s.jsx)(b,{onClick:function(){return e.switchViews()},showBook:this.state.mainView}),this.state.mainView?Object(s.jsx)(U,{}):Object(s.jsx)(F,{})]})}}]),n}(i.a.Component),X=n(81),Y=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(s.jsx)(d.a,{className:"mt-5 text-center align-items-center",children:Object(s.jsxs)(X.a,{children:[Object(s.jsx)(X.a.Header,{children:Object(s.jsx)("h1",{children:"Disclaimer"})}),Object(s.jsx)(X.a.Body,{className:"p-3 text-left",children:Object(s.jsx)("h3",{children:"This demo is hosted using Heroku free tier and MongoDB atlas free tier. The responsiveness will be slow and may take up to 10 seconds for the initial fetching of data (as heroku needs to wakeup). This is not representative of the real performance of the application."})}),Object(s.jsx)(X.a.Footer,{children:Object(s.jsx)("div",{className:"d-flex w-100",children:Object(s.jsx)("a",{href:"/book_track",className:"ml-auto",children:Object(s.jsx)(y.a,{children:"Continue to Demo"})})})})]})})}}]),n}(i.a.Component),K=n(46),Q=n(7);r.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(K.a,{children:Object(s.jsx)("div",{children:Object(s.jsxs)(Q.c,{children:[Object(s.jsx)(Q.a,{path:"/book_track/disclaimer",children:Object(s.jsx)(Y,{})}),Object(s.jsx)(Q.a,{path:"/book_track",children:Object(s.jsx)(W,{})})]})})})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.20c4ab81.chunk.js.map